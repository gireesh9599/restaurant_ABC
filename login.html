
   <link rel="stylesheet" href="vender/bs/css/bootstrap.min.css">
   <script src="vender/jquery-3.3.1.min.js"></script>
   <script src="vender/popper.min.js"></script>
   <script src="vender/bs/js/bootstrap.min.js"></script>
   <link rel="stylesheet" href="vender/fa/css/font-awesome.min.css">
         <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.js"></script>
   
         <link rel="stylesheet" href="style.css">
   
   
   <nav style="box-shadow: 2px 2px 2px #666666" class="navbar navbar-expand-md  bg-dark text-white">
       <a style="font-size: 24px; font-weight: 600; color: yellow;  text-shadow: 2px 2px 2px black" class="navbar-brand" href="#">ABC<sup style="text-shadow: 0px 0px 0px; color: black; font-size:20px;">&reg;<sup></a>
       <button class="navbar-toggler d-lg-none"  data-toggle="collapse" data-target="#collapsibleNavId" aria-controls="collapsibleNavId">
           <span class="navbar-toggler-icon"></span>
       </button>
   
       
       <div style="font-size: 20px; font-weight: 500; " class="text-white collapse navbar-collapse " id="collapsibleNavId">
           <ul class="navbar-nav ml-auto mt-2 mt-lg-0 ">
               <li class="nav-item">
                   <a class="nav-link" href="index.html">Home</a>
               </li>
               
                <li class="nav-item">
                    <a class="nav-link" href="menu.html">Menu</a>
                </li>
                <li class="nav-item">
                   <a class="nav-link" href="about.html">About</a>
               </li>
               <li class="nav-item">
                   <a class="nav-link" href="location.html">Locations</a>
               </li>
               <li class="nav-item">
                <a class="nav-link" href="register.html">Signup</a>
            </li>
               <script>
   
                         if(sessionStorage.getItem("user_role")!=null){
                                   document.write(' <li class="nav-item"> <a class="nav-link"  href="logout.html">Logout</a></li> ');
                                 }
                                 else{
                                    document.write(' <li class="nav-item"><a class="nav-link" href="login.html">Login</a>');
                         
                                 }
                               </script>
                         
           </ul>
          
       </div>
   </nav>
   


<main class="container-fluid">
    <div class="row my-4">
        <div class="col-sm-8 offset-sm-2">
       
         <h1 class="my-4">Login</h1>                 
        <form id="myform" method="post">
        <input required placeholder="EMail" class="form-control" type="text" id="userid" name="userid" /><br>
        <input required placeholder="Password" class="form-control" type="password" name="pass" id="pass"/><br>
      
        <button id="submitbtn" name="submitbtn" type="submit" class="btn btn-success btn-block">Login</button>
     <br> <center>

        <h6>or</h6>
    
        <a style="color: forestgreen;" href="register.html" >Register</a>    
 
     </center>   
      
        
        </form>
        </div>
        </div>


</main>





















<script>

    const url='http://localhost:3000/users'
  
  submitbtn.onclick = function (e) {
  
  e.preventDefault(); 
  // alert("sdfsdfsdfs");
  getuser();
  
  
  // alert(sessionStorage.getItem("user_role"));
    
  
  // window.location.href = "home.html";
       
    };
  
  function getuser(){
  
  axios.get(url).then(resp => {
      data = resp.data;
      var array = getDataById(data);
      if(array.length<2){
        alert("You have not registered");
       window.location.href = "login.html";
      }
   
      sessionStorage.clear();
    
      sessionStorage.setItem("user_id",array[0]);
      sessionStorage.setItem("user_name",array[1]);
      sessionStorage.setItem("user_email",array[2]);
      sessionStorage.setItem("user_role",array[3]);
      sessionStorage.setItem("user_village",array[4]);
      sessionStorage.setItem("user_district",array[5]);
      sessionStorage.setItem("user_state",array[6]);
      sessionStorage.setItem("user_pin",array[7]);
     
    //  alert(sessionStorage.getItem("user_role"));
     window.location.href = "index.html";
  })
  .catch(error => {
      console.log(error);
  });   
  
  
      function getDataById(data) {
  
  var elements;
  
  data.map(e => {
     
  if(e.email == userid.value){
  
     if(e.password!=pass.value){
       alert("Wrong Password!");
       window.location.href = "login.html";
     }
      
      elements = [`${e.id}`, `${e.name}`, `${e.email}`, `${e.role}`, `${e.Village}`, `${e.District}`, `${e.State}`, `${e.Pin}`];
      alert("welcom "+e.name);
  }

//   alert("welcom "+e.name);
  
  })
  return elements;
  }

  }
  

</script>




<footer id="footer" class="bg-dark text-white text-center">
    <div class="row p-5">
        <div class="col-sm-4">
            <h5>Customer Service</h5>
            <a href="#">Contact Us</a><br>
            <a href="#">Track Order</a>
        </div>
        <div class="col-sm-4">
            <h5 class="mb-3">Connect With Us</h5>
            <a href="#"> <i class="fa fa-2x fa-facebook-square"></i></a>
            <a href="#"> <i class="fa fa-2x fa-twitter-square mx-4"></i></a>
            <a href="#"> <i class="fa fa-2x fa-instagram"></i></a>
        </div>
        <div class="col-sm-4">
            <h5>Company</h5>
            <a href="about.html">About Us</a><br>
            <a href="#">Terms and condition</a>
        </div>
    </div>
    <p style="border-bottom: 1px yellow solid" class="mx-5"></p>
    <p class="pb-3">Copyright @ <a style="color: white;" href="index.html">ABC.com</a></p>
    </footer>
    